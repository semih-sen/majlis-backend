<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Majlis Test</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h2>Majlis Bağlantı Testi</h2>
    <p>Durum: <span id="durum">Bağlanıyor...</span></p>

    <script>
        // Sunucuya bağlanmaya çalışıyoruz
        // Dikkat: ws:// değil, http:// protokolü üzerinden kütüphane kendi halleder
        const socket = io('http://localhost:3000');

        const durumYazisi = document.getElementById('durum');

        // Bağlantı kurulursa burası çalışır
        socket.on('connect', () => {
            console.log("Bağlandı! Socket ID:", socket.id);
            durumYazisi.innerText = "BAĞLANDI! (ID: " + socket.id + ")";
            durumYazisi.style.color = "green";
            
            // Odaya girme denemesi yapalım
            socket.emit('join-room', 'cay-odasi', 'user-123');
        });

        // Bağlantı koparsa burası çalışır
        socket.on('disconnect', () => {
            console.log("Bağlantı koptu");
            durumYazisi.innerText = "Bağlantı Koptu";
            durumYazisi.style.color = "red";
        });
    </script>
</body>
</html>